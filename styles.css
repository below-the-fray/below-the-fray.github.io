/* ===============================
   LaTeX-Style Page + Fixed Left Sidebar
   =============================== */

:root{
    --page-width: 46rem;        /* readable paper width */
    --sidebar-w: 18rem;         /* width of left column */
    --gap: 2rem;                /* space between sidebar and paper */
    --text:#111; --accent:#333; --rule:#bbb; --lh:1.55;
}

html{
    font-size:16px;
    scroll-behavior:smooth;
}
@media (prefers-reduced-motion:reduce){
    html{scroll-behavior:auto;}
}

body{
    margin:0;
    color:var(--text);
    background:#fff;
    line-height:var(--lh);
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
    font-family:"Times New Roman",Times,Cambria,"Liberation Serif",serif;
}

/* Prevent anchors from hiding under top edge */
h2[id],h3[id]{scroll-margin-top:80px}

/* ===============================
   DESKTOP LAYOUT (≥901px)
   =============================== */
@media (min-width:901px){
    /* Fixed left sidebar */
    .sidebar{
        position:fixed;
        left:0; top:0;
        width:var(--sidebar-w);
        height:100vh;
        overflow:auto;
        background:#fafafa;
        border-right:1px solid #ccc;
        padding:1rem;
        z-index:1000;
    }
    .sidebar-inner{position:relative;}

    /* Main paper column shifted right */
    .page{
        max-width:var(--page-width);
        margin-left:calc(var(--sidebar-w) + var(--gap));
        margin-right:auto;
        padding:0 1rem;
    }

    /* Hide mobile-only controls */
    .toc-toggle,.toc-backdrop{display:none !important;}
}

/* ===============================
   MOBILE LAYOUT (≤900px)
   =============================== */
@media (max-width:900px){
    .toc-toggle{
        display:block;
        position:sticky;
        top:0;
        z-index:1001;
        width:100%;
        padding:.75rem 1rem;
        margin:0;
        text-align:left;
        background:#fafafa;
        border:0;
        border-bottom:1px solid #ddd;
        font:inherit;
        cursor:pointer;
    }
    .toc-backdrop{
        position:fixed;
        inset:0;
        background:rgba(0,0,0,.35);
        z-index:1000;
    }
    .sidebar{
        position:fixed;
        z-index:1002;
        top:0; left:0;
        height:100vh;
        width:18rem;
        max-width:85vw;
        background:#fafafa;
        border-right:1px solid #ccc;
        padding:1rem;
        transform:translateX(-100%);
        transition:transform .25s ease-out;
        box-shadow:0 0 20px rgba(0,0,0,.15);
    }
    .sidebar.sidebar--open{transform:translateX(0);}
    .sidebar-inner{position:relative;max-height:100%;overflow:auto;}
    body.toc-open{overflow:hidden;}
    .page{
        max-width:var(--page-width);
        margin:0 auto;
        padding:1rem;
    }
}

/* ===============================
   SIDEBAR CONTENT
   =============================== */
.sidebar h2{
    font-size:1rem;
    margin:0 0 .5rem 0;
    padding-bottom:.25rem;
    border-bottom:1px solid #ccc;
}
.sidebar ul{list-style:none;margin:.5rem 0 0 0;padding:0;}
.sidebar li{margin:.3rem 0;}
.sidebar a{color:#333;text-decoration:none;}
.sidebar a:hover{text-decoration:underline;}
.sidebar a.is-active{text-decoration:underline;font-weight:600;}
.no-number::before{content:none !important;}

/* ===============================
   PAPER CONTENT (LaTeX look)
   =============================== */
.title-block{text-align:center;margin:2rem 0;}
.title-block h1{
    margin:0 0 .5rem 0;
    font-weight:700;
    font-size:1.9rem;
    letter-spacing:.2px;
}
.title-block .authors,
.title-block .affil,
.title-block .date{color:var(--accent);font-size:.98rem;}
.title-block .affil{font-style:italic;}

.abstract{
    position:relative;
    border:1px solid var(--rule);
    border-left-width:.35rem;
    padding:.9rem 1rem .95rem;
    margin:1.75rem 0 2rem;
    background:#fafafa;
}
.abstract::before{
    content:"Abstract—";
    font-weight:700;
    font-style:italic;
    margin-right:.35rem;
}

/* Paragraphs + numbering */
p{margin:.45rem 0;text-indent:1.5em;}
.noindent{text-indent:0;}

.page{counter-reset:section subsection figure table eqn;}
.page h2{
    counter-increment:section;
    counter-reset:subsection;
    font-size:1.25rem;
    margin:1.35rem 0 .5rem;
    line-height:1.25;
}
.page h2::before{content:counter(section) ". ";}
.page h3{
    counter-increment:subsection;
    font-size:1.05rem;
    margin:1.05rem 0 .4rem;
    line-height:1.25;
}
.page h3::before{content:counter(section) "." counter(subsection) " ";}

/* Figures, tables, equations */
figure,.table{margin:1rem auto;}
figure{counter-increment:figure;}
figure>img{max-width:100%;display:block;margin:0 auto;}
figcaption{font-size:.95rem;color:#333;text-align:center;margin-top:.35rem;}
figcaption::before{content:"Figure " counter(figure) ": ";font-weight:600;}

.table{counter-increment:table;}
.table>.caption{
    font-size:.95rem;color:#333;text-align:center;
    margin:.35rem 0 .5rem;font-weight:600;
}
.table>.caption::before{content:"Table " counter(table) ": ";}
table{width:100%;border-collapse:collapse;font-size:.98rem;}
thead tr{border-bottom:2px solid #000;}
tbody tr+tr{border-top:1px solid #ddd;}
th,td{text-align:left;padding:.45rem .35rem;}

.equation{display:flex;align-items:center;margin:.8rem 0;counter-increment:eqn;}
.equation .content{flex:1 1 auto;text-align:center;}
.equation .number{flex:0 0 auto;width:3rem;text-align:right;}
.equation .number::before{content:"(" counter(eqn) ")";}

/* Footnotes & references */
sup.fn{font-size:.7em;vertical-align:super;}
.footnotes{border-top:1px solid var(--rule);margin-top:2rem;padding-top:.5rem;}
.refs{margin-top:1.5rem;}
.refs h3{margin-top:1rem;}
.refs ol{padding-left:1.15rem;}
.refs li{margin:.3rem 0;}

/* Horizontal rules & links */
hr{border:none;border-top:1px solid var(--rule);margin:1.5rem 0;}
a{color:inherit;text-decoration:none;}
a:hover{text-decoration:underline;}

/* ===============================
   PRINT
   =============================== */
@media print{
    html{font-size:12pt;}
    .sidebar,.toc-toggle,.toc-backdrop{display:none !important;}
    .page{margin:0;padding:0;}
    .abstract{background:#fff;}
    a{text-decoration:none;}
}